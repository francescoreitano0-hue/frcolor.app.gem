<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FR COLOR PRO OFFICIAL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <img src="logo.png" alt="FR Color" class="login-logo">
            <input type="password" id="pass-input" placeholder="Password">
            <button class="btn-main" onclick="checkLogin()">ACCEDI</button>
            <p id="login-err" class="err"></p>
        </div>
    </div>

    <div id="main-app" class="app-container" style="display:none;">
        <header class="header">
            <div class="h-top">
                <img src="logo.png" alt="Logo" style="height: 35px;">
                <button onclick="location.reload()" style="background:none; border:1px solid #ddd; border-radius:8px; padding:5px 10px;">Esci</button>
            </div>
            <div class="rainbow-line"></div>
        </header>

        <main class="dashboard">
            <div class="card" onclick="openMod('cantieri')"><h3>üìÅ GESTIONE CANTIERI</h3></div>
            <div class="card" onclick="openMod('irina')"><h3>üëÅÔ∏è IRINA SPETTROMETRO HD</h3></div>
            <div class="card" onclick="openMod('magazzino')"><h3>üì¶ MAGAZZINO & NOTE</h3></div>
        </main>

        <footer class="dock">
            <a href="https://wa.me/393290295847" target="_blank">WA</a>
            <a href="mailto:info@frcolor.it">Mail</a>
            <a href="https://gemini.google.com" target="_blank">Gemini</a>
            <a href="https://chatgpt.com" target="_blank">ChatGPT</a>
            <a href="#" class="btn-x">X</a>
        </footer>
    </div>

    <div id="mod-cantieri" class="modal"><div class="modal-content">
        <div class="modal-h"><h2>CANTIERI</h2><button onclick="closeMod('cantieri')">‚úï</button></div>
        <input type="text" id="c-nome" placeholder="Nome nuovo cantiere...">
        <button class="btn-main" onclick="addCantiere()">CREA CARTELLA</button>
        <div id="c-list"></div>
    </div></div>

    <div id="mod-irina" class="modal"><div class="modal-content">
        <div class="modal-h"><h2>IRINA HD</h2><button onclick="closeMod('irina')">‚úï</button></div>
        <div class="cam-box">
            <video id="v" autoplay playsinline></video>
            <canvas id="c-view" style="display:none; width:100%; height:100%; object-fit:cover;"></canvas>
            <div class="crosshair"></div>
        </div>
        <div class="results">
            <div id="color-preview" class="color-dot"></div>
            <div id="out-text" class="color-text">Inquadra o carica una foto...</div>
        </div>
        <div class="btn-grid">
            <button class="btn-main" onclick="takeReading()">LEGGI COLORE</button>
            <label class="btn-sec">SCATTA FOTO <input type="file" hidden accept="image/*" capture="environment" onchange="analyzeImg(this)"></label>
            <label class="btn-sec">GALLERIA <input type="file" hidden accept="image/*" onchange="analyzeImg(this)"></label>
        </div>
    </div></div>

    <div id="mod-magazzino" class="modal"><div class="modal-content">
        <div class="modal-h"><h2>MAGAZZINO</h2><button onclick="closeMod('magazzino')">‚úï</button></div>
        <div class="tabs"><button id="t-mat" class="active" onclick="setTab('mat')">Materiali</button><button id="t-att" onclick="setTab('att')">Attrezzature</button></div>
        <input type="text" id="m-nome" placeholder="Articolo...">
        <input type="number" id="m-qta" placeholder="Q.t√†">
        <textarea id="m-note" placeholder="Note (marca, fornitore, ecc...)"></textarea>
        <div class="btn-grid-row"><button class="btn-in" onclick="updStock('IN')">CARICO</button><button class="btn-out" onclick="updStock('OUT')">SCARICO</button></div>
        <div id="m-list"></div>
    </div></div>

    <script src="app.js"></script>
</body>
</html>
